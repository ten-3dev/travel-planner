사용자가 로그인 시
리프레쉬 토큰과 액세스 토큰을 둘 다 줌

서버에서 리프레쉬 토큰과 액세스 토큰을 둘 다 보내주면

클라이언트에서는 브라우저 쿠키 리프레쉬 토큰을 저장한다. 이때
XSS같은 해킹에 일반 쿠키는 매우 취약하기 때문에 httponly라는 옵션을 걸어줘야 그나마 방지가 가능하다.

액세스 토큰은 axios가 지원하는 헤더를 설정할때 액세스 토큰을 넣어준다.

서버는 액세스 토큰을 따로 저장하는게 아니라
jwt 저장소에 자동으로 넣어주고 유효성 체크를 해주면 된다.
또한 서버는 리프레쉬 토큰은 DB에 따로 저장해주어야한다.


https://doogle.link/jwt-%ED%98%B9%EC%9D%80-oauth2-%EC%9D%98-refresh-%ED%86%A0%ED%81%B0%EC%9D%84-%EC%96%B4%EB%94%94%EB%8B%A4-%EC%A0%80%EC%9E%A5%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C/

DB 에 저장할때는 실제 리프레쉬 토큰 값을 DB에 넣어주고 index 값을 쿠키로 저장해 놓는다. 이러면 쿠키를 한달 ~ 1년으로 해둘 수 있어 계속 접속유지가 가능하다. 조금 더 보안이 예민하다면
일반 index가 아닌 hash를 이용하는 방법도 있다.

토큰 생성은 똑같은 함수를 쓰면 된다.


참고로 API 요청을 칠때마다 토큰을 체크해서 만료여부를 확인한다.